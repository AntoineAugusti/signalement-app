<div class="overflow-container">
  <div class="banner text-center section section-lighter-grey" role="region">
    <div class="container">
      <h1 class="text-center">
        Professionnels triés par nombre de signalement
      </h1>
    </div>
  </div>

  <pagination *appRole="[roles.Admin, roles.DGCCRF]"
              [boundaryLinks]="true" [totalItems]="totalCount" [maxSize]="5" [itemsPerPage]="itemsPerPage" (pageChanged)="changePage($event)"
              [(ngModel)]="currentPage" previousText="&lsaquo;" nextText="&rsaquo;" firstText="&laquo;" lastText="&raquo;" class=" mt-2 justify-content-center">
  </pagination>

  <div class="table-responsive" *appRole="[roles.Admin, roles.DGCCRF]">
    <table class="table">
      <thead>
        <tr>
          <th>Dep</th>
          <th *appRole="[roles.DGCCRF]">Commune</th>
          <th *appRole="[roles.DGCCRF]">Siret</th>
          <th>Commerçant</th>
          <th># signalements</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngIf="!loading && !reports.length">
          <td colspan="8">
            <span class="error" *ngIf="loadingError">Une erreur technique s'est produite</span>
            <span *ngIf="!loadingError">Aucun signalement trouvé</span>
          </td>
        </tr>
        <tr *ngFor="let report of reports" class="pointer">
          <td>{{report.company.postalCode | slice : 0 : 2}}</td>
          <td *appRole="[roles.DGCCRF]">{{report.company.postalCode}}</td>
          <td *appRole="[roles.DGCCRF]">{{report.company.siret}}</td>
          <td>
            <span [tooltip]="companyTooltip">
              {{report.company.name}}
              <ng-template #companyTooltip>
                <span *ngIf="report.company.line1">{{report.company.line1}}<br /></span>
                <span *ngIf="report.company.line2">{{report.company.line2}}<br /></span>
                <span *ngIf="report.company.line3">{{report.company.line3}}<br /></span>
                <span *ngIf="report.company.line4">{{report.company.line4}}<br /></span>
                <span *ngIf="report.company.line5">{{report.company.line5}}<br /></span>
                <span *ngIf="report.company.line6">{{report.company.line6}}<br /></span>
                <span *ngIf="report.company.line7">{{report.company.line7}}<br /></span>
              </ng-template>
            </span>
          </td>
          <td>
            12
          </td>
        </tr>
      </tbody>
      <ngx-loading [show]="loading"></ngx-loading>
    </table>
  </div>

  <pagination *appRole="[roles.Admin, roles.DGCCRF]" [boundaryLinks]="true" [totalItems]="totalCount" [maxSize]="5" [itemsPerPage]="itemsPerPage" (pageChanged)="changePage($event)"
              [(ngModel)]="currentPage" previousText="&lsaquo;" nextText="&rsaquo;" firstText="&laquo;" lastText="&raquo;" class="justify-content-center">
  </pagination>
</div>


