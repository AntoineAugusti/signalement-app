<div class="banner text-center section section-primary" role="region">
  <div class="container">
    <h1 class="text-center">
      Statistiques
    </h1>
  </div>
</div>

<main role="main">
  <section class="section section-lightest-grey">
    <div class="container max-width">
      <div class="card">
        <div class="card-body">
          <h3>Nombre total de signalements</h3>
          <div class="count">
            {{reportCount}}
          </div>
          <div class="text-right">
            <a (click)="loadMonthlyReportChart()" data-toggle="collapse" href="#collapseMonthlyReportChart" class="collapsed">
              >> Consulter les statistiques mensuelles
            </a>
          </div>
          <div class="collapse" id="collapseMonthlyReportChart">
            <div echarts [options]="monthlyReportChart"></div>
            <ngx-loading [show]="!monthlyReportChart"></ngx-loading>
          </div>
          <ngx-loading [show]="!reportCount"></ngx-loading>
        </div>
      </div>
      <div class="card">
        <div class="card-body">
          <h3>
            Taux de lecture par le professionnel
            <i class="material-icons" aria-hidden="true"
               tooltip="Pourcentage de professionnel qui a pris connaissance du signalement">
              help_outline
            </i>
          </h3>
          <div class="count" *ngIf="reportReadByProPercentage">
            {{reportReadByProPercentage.toFixed(0) + "%" }}
          </div>
          <div class="text-right">
            <a (click)="loadMonthlyReportReadByProChart()" data-toggle="collapse" href="#collapseMonthlyReportReadByProChart" class="collapsed">
              >> Consulter les statistiques mensuelles
            </a>
          </div>
          <div class="collapse" id="collapseMonthlyReportReadByProChart">
            <div echarts [options]="monthlyReportReadByProChart"></div>
            <ngx-loading [show]="!monthlyReportReadByProChart"></ngx-loading>
          </div>
          <ngx-loading [show]="!reportReadByProPercentage"></ngx-loading>
        </div>
      </div>
      <div class="card">
        <div class="card-body">
          <h3>
            Taux de réponse du  professionnel
            <i class="material-icons" aria-hidden="true"
               tooltip="Pourcentage de professionnel qui, ayant pris connaissance du signalement, ont apporté une réponse">
              help_outline
            </i>
          </h3>
          <div class="count" *ngIf="reportWithResponsePercentage">
            {{reportWithResponsePercentage.toFixed(0) + "%" }}
          </div>
          <div class="text-right">
            <a (click)="loadMonthlyReportWithReponseChart()" data-toggle="collapse" href="#collapseMonthlyReportWithReponseChart" class="collapsed">
              >> Consulter les statistiques mensuelles
            </a>
          </div>
          <div class="collapse" id="collapseMonthlyReportWithReponseChart">
            <div echarts [options]="monthlyReportWithResponseChart"></div>
            <ngx-loading [show]="!monthlyReportWithResponseChart"></ngx-loading>
          </div>
          <ngx-loading [show]="!reportWithResponsePercentage"></ngx-loading>
        </div>
      </div>
    </div>
  </section>
</main>
