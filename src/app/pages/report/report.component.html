<ng-container *ngIf="isStep('Category')">
  <div class="banner" role="banner">
    <div class="banner_container">
      <h2 class="text-center">
        Absence de prix, manque d'hygiène, garantie non respectée ou victime d'une fraude&#160;...&#160;?
        <br />
        <br class="d-sm-none" />
        Signalez votre problème facilement aux services compétents et aux professionnels.
      </h2>
      <h3>
        Magasins, commerces de proximité, cafés et restaurants...
      </h3>
    </div>
  </div>

  <main role="main">
    <section class="section section-grey position-relative">

      <div class="container">
        <h4 class="text-center">Précisez votre problème</h4>
        <div class="row">
          <div class="col-12 col-sm-6 col-md-4" *ngFor="let anomaly of anomaliesOrderByRank() ">
            <div class="category pointer" (click)="selectAnomaly(anomaly)">
              <div class="row">
                <div class="col-12 col-md-2 mb-2 text-center">
                  <img src="/assets/images/{{anomaly.icon}}" alt="Icône catégorie de problème" *ngIf="anomaly.icon"/>
                </div>
                <div class="col-12 col-md-10">
                  <h5 class="mb-0">{{anomaly.category}}</h5>
                  <span class="note">{{anomaly.description}}</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="section section-white">
      <div class="container">
        <div class="row">
          <div class="col-12 mb-3 col-sm-4">
            <div class="icon">
              <img src="/assets/images/icon_store.png" alt="Icône magasin"/>
            </div>
            <p class="text-center"><b>Simple et rapide</b></p>
            <p>
              Cette plateforme permet aux consommateurs de signaler facilement et rapidement les anomalies
              qu'ils rencontrent dans leur vie de tous les jours.
            </p>
          </div>
          <div class="col-12 mb-3 col-sm-4">
            <div class="icon">
              <img src="/assets/images/icon_workflow.png" alt="Icône workflow"/>
            </div>
            <p class="text-center"><b>Au service des professionnels</b></p>
            <p>
              Les signalements sont centralisés et transmis aux professionnels concernés pour qu'ils puissent
              corriger les problèmes.
            </p>
          </div>
          <div class="col-12 col-sm-4">
            <div class="icon">
              <img src="/assets/images/icon_alarm.png" alt="Icône alarme"/>
            </div>
            <p class="text-center"><b>Collaboratif et citoyen</b></p>
            <p>
              Vous êtes plusieurs à signaler les mêmes anomalies et la situation perdure ?
              Les enquêteurs de la répression des fraudes seront avertis.
            </p>
          </div>
        </div>
      </div>
    </section>
  </main>
</ng-container>

<ng-container *ngIf="isStep('Information')">
  <main role="main">
    <section class="section-small section-grey">
      <div class="container">
        <h1>{{anomalySelected.information.title}}</h1>
      </div>
    </section>
    <section class="section section-white">
      <div class="container max-width">
        <p class="mt-4" [innerHTML]="anomalySelected.information.content"></p>
        <hr />
        <button class="btn btn-lg btn-primary" (click)="ngOnInit()">
          Identifier un autre problème
        </button>
      </div>
    </section>
  </main>
</ng-container>

<ng-container *ngIf="isStep('Precision')">
  <main>
    <app-breadcrumb [step]="step" [report]="report" (back)="stepBackward()"></app-breadcrumb>
    <app-precision
      [initialValue]="report.anomalyPrecision"
      [anomalyPrecisionList]="this.anomalySelected.precisionList"
      (validate)="onPrecisionValidate($event)">
    </app-precision>
  </main>
</ng-container>

<ng-container *ngIf="isStep('Description')">
  <main>
    <app-breadcrumb [step]="step" [report]="report" (back)="stepBackward()"></app-breadcrumb>
    <app-details
      [initialValue]="report.details"
      (validate)="onDetailsValidate($event)">
    </app-details>
  </main>
</ng-container>

<ng-container *ngIf="isStep('Company')">
  <main>
    <app-breadcrumb [step]="step" [report]="report" (back)="stepBackward()"></app-breadcrumb>
    <app-company (validate)="onCompanyValidate($event)"></app-company>
  </main>
</ng-container>


<ng-container *ngIf="isStep('Consumer')">
  <main>
    <app-breadcrumb [step]="step" [report]="report" (back)="stepBackward()"></app-breadcrumb>
    <app-consumer
      [initialValue]="report.consumer"
      (validate)="onConsumerValidate($event)">
    </app-consumer>
  </main>
</ng-container>

<ng-container *ngIf="isStep('Confirmation')">
  <main>
    <app-breadcrumb [step]="step" [report]="report" (back)="stepBackward()"></app-breadcrumb>
    <app-confirmation
      [report]="report"
      (validate)="onConfimationValidate()">
    </app-confirmation>
  </main>
</ng-container>

<ng-container *ngIf="isStep('Acknowledgment')">
  <main role="main">
    <section class="section-small section-grey">
      <div class="container">
        <h1>Merci pour votre signalement</h1>
      </div>
    </section>
    <section class="section section-white">
      <div class="container max-width">
        <p class="mt-4">
          Afin de corriger lui-même l’anomalie, le professionnel pourra aussi consulter votre signalement anonymisé.
          <br />
          Il ne déclenchera pas à lui seul un contrôle des autorités.
        </p>
        <hr />
        <button class="btn btn-lg btn-primary" (click)="ngOnInit()">
          Identifier un autre problème
        </button>
      </div>
    </section>
  </main>
</ng-container>
