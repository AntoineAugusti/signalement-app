<ng-container *ngIf="isStep('Category')">
  <div class="banner text-center section section-lighter-grey" role="banner">
    <div class="container">
      <h4>
        Confronté à une erreur de prix, un restaurant sale ou une garantie constructeur non respectée ?
        <br />
        Victime d’une fraude ou d’une arnaque ?
        <br />
      </h4>
      <h3>
        <br />
        Vous ne savez pas à qui vous adresser et quelles démarches effectuer?
      </h3>
      <img src="/assets/images/feeling_blue.svg" alt="Illustration problème"/>
      <h2>
        Trouvez facilement la solution à votre problème <br />et alertez en quelques clics le commerçant et les services compétents.
      </h2>
    </div>
  </div>

  <main role="main">
    <section class="section section-lightest-grey position-relative">

      <div class="container">
        <h4 class="text-center">Précisez votre problème</h4>
        <div class="row">
          <div class="col-12 col-sm-6 col-md-4" *ngFor="let category of primaryCategoriesOrderByRank()">
            <div class="category pointer" (click)="selectAnomaly(category)">
              <div class="row">
                <div class="col-12 col-lg-2 mb-2 text-center">
                  <img src="/assets/images/{{category.icon}}" alt="Icône catégorie de problème" *ngIf="category.icon"/>
                </div>
                <div class="col-12 col-lg-10">
                  <h5 class="mb-0">{{category.category}}</h5>
                  <span class="note">{{category.description}}</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <h4 class="text-center pointer" (click)="displaySecondaryCategories()" *ngIf="!showSecondaryCategories; else secondaryCategories;">
          <u>Mon problème n'est pas dans la liste</u>
        </h4>
        <ng-template #secondaryCategories>
          <h4 class="text-center pointer" *ngFor="let category of secondaryCategoriesOrderByRank()" (click)="selectAnomaly(category)">
            <u>{{category.category}}</u>
          </h4>
        </ng-template>
      </div>
    </section>

    <section class="section section-lighter-grey">
      <div class="container">
        <div class="row">
          <div class="col-12 mb-3 col-sm-4">
            <div class="icon">
              <img src="/assets/images/icon_store.png" alt="Icône magasin"/>
            </div>
            <p class="text-center"><b>Simple et rapide</b></p>
            <p>
              Cette plateforme permet aux consommateurs de signaler facilement et rapidement les anomalies
              qu'ils rencontrent dans leur vie de tous les jours.
            </p>
          </div>
          <div class="col-12 mb-3 col-sm-4">
            <div class="icon">
              <img src="/assets/images/icon_workflow.png" alt="Icône workflow"/>
            </div>
            <p class="text-center"><b>Au service des professionnels</b></p>
            <p>
              Les signalements sont centralisés et transmis aux professionnels concernés pour qu'ils puissent
              corriger les problèmes.
            </p>
          </div>
          <div class="col-12 col-sm-4">
            <div class="icon">
              <img src="/assets/images/icon_alarm.png" alt="Icône alarme"/>
            </div>
            <p class="text-center"><b>Collaboratif et citoyen</b></p>
            <p>
              Vous êtes plusieurs à signaler les mêmes anomalies et la situation perdure ?
              Les enquêteurs de la répression des fraudes seront avertis.
            </p>
          </div>
        </div>
      </div>
    </section>
  </main>
</ng-container>

<ng-container *ngIf="isStep('Information')">
  <main role="main">
    <app-breadcrumb [step]="step" [report]="report" (back)="stepBackward()"></app-breadcrumb>
    <section class="section section-white">
      <div class="container max-width">
        <h4 class="text-center">{{informationToDisplay.title}}</h4>
        <hr />
        <p class="mt-4" [innerHTML]="informationToDisplay.content"></p>
        <hr />
        <button class="btn btn-lg btn-primary" (click)="ngOnInit()">
          Identifier un autre problème
        </button>
      </div>
    </section>
  </main>
</ng-container>

<ng-container *ngIf="isStep('Subcategory')">
  <main>
    <app-breadcrumb [step]="step" [report]="report" (back)="stepBackward()"></app-breadcrumb>
    <app-subcategory
      [initialValue]="report.subcategory"
      [anomalySubcategories]="getSubcategories()"
      (validate)="onSubcategoryValidate($event)">
    </app-subcategory>
  </main>
</ng-container>

<ng-container *ngIf="isStep('Details')">
  <main>
    <app-breadcrumb [step]="step" [report]="report" (back)="stepBackward()"></app-breadcrumb>
    <app-details
      [initialValue]="report.details"
      [precision]="report.subcategory?.precision"
      (validate)="onDetailsValidate($event)">
    </app-details>
  </main>
</ng-container>

<ng-container *ngIf="isStep('Company')">
  <main>
    <app-breadcrumb [step]="step" [report]="report" (back)="stepBackward()"></app-breadcrumb>
    <app-company (validate)="onCompanyValidate($event)"></app-company>
  </main>
</ng-container>


<ng-container *ngIf="isStep('Consumer')">
  <main>
    <app-breadcrumb [step]="step" [report]="report" (back)="stepBackward()"></app-breadcrumb>
    <app-consumer
      [initialValue]="report.consumer"
      (validate)="onConsumerValidate($event)">
    </app-consumer>
  </main>
</ng-container>

<ng-container *ngIf="isStep('Confirmation')">
  <main>
    <app-breadcrumb [step]="step" [report]="report" (back)="stepBackward()"></app-breadcrumb>
    <app-confirmation
      [report]="report"
      (validate)="onConfimationValidate()">
    </app-confirmation>
  </main>
</ng-container>

<ng-container *ngIf="isStep('Acknowledgment')">
  <main role="main">
    <section class="section-small section-lighter-grey">
      <div class="container">
        <h1>Merci pour votre signalement</h1>
      </div>
    </section>
    <section class="section section-white">
      <div class="container max-width">
        <p class="mt-4">
          Afin de corriger lui-même l’anomalie, le professionnel pourra aussi consulter votre signalement anonymisé.
          <br />
          Il ne déclenchera pas à lui seul un contrôle des autorités.
        </p>
        <hr />
        <button class="btn btn-lg btn-primary" (click)="ngOnInit()">
          Identifier un autre problème
        </button>
      </div>
    </section>
  </main>
</ng-container>
