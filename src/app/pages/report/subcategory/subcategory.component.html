<section class="section section-white">
  <div class="container">
    <form [formGroup]="subcategoryForm" (submit)="submitSubcategoryForm()" id="subcategoryForm">
      <div class="row pb-4" *ngFor="let subcategory of anomalySubcategories">
        <div class="col-2 col-sm-1 text-right pr-1">
          <input type="radio" formControlName="anomalySubcategory" [value]="subcategory.title" id="radio-{{subcategory.title}}"/>
        </div>
        <div class="col-10 col-sm-11 pl-1">
          <label class="d-block mb-0 pointer" for="radio-{{subcategory.title}}">{{subcategory.title}}</label>
          <span class="note" [innerHTML]="subcategory.description" *ngIf="!isTruncable(subcategory.description); else truncableDescription"></span>
          <ng-template #truncableDescription>
            <ng-container *ngIf="subcategory.fullDescriptionDisplayed; else truncatedDescription">
              <span class="note" [innerHTML]="subcategory.description"></span>
              <span class="pointer link" (click)="reverseDescriptionDisplay(subcategory)"><br />masquer</span>
            </ng-container>
            <ng-template #truncatedDescription>
              <span class="note" [innerHTML]="subcategory.description | truncate : 100 : true"></span>
              <span class="pointer link" (click)="reverseDescriptionDisplay(subcategory)"><br />lire la suite</span>
            </ng-template>
          </ng-template>
        </div>
      </div>
      <div class="notification error" *ngIf="showErrors && anomalySubcategoryCtrl.hasError('required')">
        Veuillez sélectionner une des propositions ci-dessus.
      </div>
      <hr />
      <button type="submit" class="btn btn-lg btn-primary">
        <img alt="Icône du bouton suivant" src="/assets/images/icon_play.png">
        Détailler le problème
      </button>
    </form>
  </div>
</section>
