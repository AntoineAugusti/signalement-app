<section class="section section-white">
  <div class="container">

    <form [formGroup]="detailsForm" (submit)="submitDetailsForm()" id="detailsForm">

      <div class="form__group" *ngIf="precision">
        <label>
          {{precision.title}}
        </label>
        <div class="row pb-2 pl-3" *ngFor="let option of precision.options">
          <div class="col-1 text-right pr-1">
            <input type="radio" formControlName="precision" [value]="option" id="radio-{{option}}"/>
          </div>
          <div class="col-11 pl-1">
            <label class="d-block mb-0" for="radio-{{option}}">{{option}}</label>
          </div>
        </div>
      </div>

      <div class="form__group">
        <label>
          Description du problème
        </label>
        <textarea formControlName="description"
                  rows="3"
                  maxlength="200"
                  placeholder="200 caractères maximum">
                </textarea>
      </div>

      <div class="form__group">
        <label>
          Date et plage horaire du constat
        </label>
        <div class="row">
          <div class="col-12 col-sm-6">
            <input type="text"
                   formControlName="anomalyDate"
                   placeholder="Date du constat"
                   bsDatepicker
                   [bsConfig]="{ containerClass: 'theme-default' }">
          </div>
          <div class="col-12 col-sm-6">
            <div class="form__group">
              <select formControlName="anomalyTimeSlot">
                <option disabled value="">Plage horaire</option>
                <option *ngFor="let hour of plageHoraireList" value="{{hour}}">de {{hour}}h à {{hour + 1}}h</option>
              </select>
            </div>
          </div>
        </div>
      </div>

      <div class="form__group">
        <label>
          Photos du ticket de caisse et/ou du problème
        </label>
        <div class="row">
          <div class="col-12 col-sm-6">
            <app-file-input
              [placeholder]="'Photo du ticket de caisse'"
              (fileSelected)="onTicketFileSelected($event)">
            </app-file-input>
          </div>
          <div class="col-12 col-sm-6">
            <app-file-input
              [placeholder]="'Photo du problème'"
              (fileSelected)="onAnomalyFileSelected($event)">
            </app-file-input>
          </div>
        </div>
      </div>
      <div class="notification error" *ngIf="showErrors && detailsForm.invalid">
        <span *ngIf="anomalyDateCtrl.hasError('required')">
          Veuillez renseigner la date du constat.<br />
        </span>
        <span *ngIf="precisionCtrl.hasError('required')">
          Veuillez précisez.
        </span>
      </div>
      <hr />
      <button type="submit" class="btn btn-lg btn-primary">
        Identifier le commerçant
      </button>
    </form>
  </div>
</section>
