<div class="banner text-center section section-primary" role="region">
    <div class="container">
      <h1 class="rounded">
        Signaler un problème à la répression&nbsp;des&nbsp;fraudes<br> en toute transparence avec le commerçant
      </h1>
      <h4>
        en <strong class="text-uppercase">Centre-Val de Loire</strong>, <strong class="text-uppercase">Auvergne-Rhône-Alpes</strong> et&nbsp;<strong class="text-uppercase">Occitanie</strong>
      </h4>
      <img src="/assets/images/ARA-CVL-OCC.svg" style="width: 145px" alt="Carte de la France" />
    </div>
  </div>

  <main role="main">

    <alert class="text-center" type="danger" dismissible="true" [isOpen]="report && report.retrievedFromStorage" (onClosed)="removeStoredReport()">
      <h4>Vous avez déjà commencé un signalement, souhaitez-vous le finaliser pour l'envoyer au commerçant ?</h4>
      <button type="submit" class="button-outline warning" (click)="removeStoredReport()" appAutofocus>Non</button>
      <button type="submit" class="button warning ml-4 ml-sm-5" (click)="restoreStoredReport()">Oui</button>
    </alert>

    <section class="section section-lighter-grey position-relative">
        <div class="container mt-4">
            <div class="row pb-4 ">
              <div class="col-12 col-md-3 text-center">
                <img src="/assets/images/formulaire.png" alt="formulaire" width="110px" style="vertical-align: middle"/>
                <p class="legend">
                  <span class="d-inline d-md-none">1.</span> Déposez un signalement
                </p>
              </div>
              <div class="col-md-1 text-center mt-4 d-none d-md-block">
                <img src="/assets/images/arrow-right.png" alt="flêche" width="48"/>
              </div>
              <div class="col-12 col-md-4 text-center">
                <img src="/assets/images/magasin.png" alt="magasin" width="110px" style="vertical-align: middle"/>
                <p class="legend">
                    <span class="d-inline d-md-none">2.</span> Le commerçant est prévenu et peut se corriger
                </p>
              </div>
              <div class="col-md-1 text-center mt-4 d-none d-md-block">
                <img src="/assets/images/arrow-right.png" alt="flêche" width="48"/>
              </div>
              <div class="col-12 col-md-3 text-center">
                <img src="/assets/images/jumelles.png" alt="jumelles" width="110px" style="vertical-align: middle"/>
                <p class="legend">
                    <span class="d-inline d-md-none">3.</span> La répression des fraudes est alertée
                </p>
              </div>
          </div>
          <div class="row">
            <div class="col-12 text-center">
              <button type="button" class="btn btn-primary btn-lg cta-btn" (click)="scrollToElement(categoryList)">&nbsp;&nbsp;Je signale&nbsp;&nbsp;</button>
            </div>
          </div>
        </div>
    </section>

    <section #categoryList class="section section-lightest-grey position-relative">

      <div class="container">
        <h3 class="text-center sous-titre">Quel est le problème ?</h3>
        <div class="row pb-4">
          <div class="col-12 col-sm-6 col-md-4" *ngFor="let category of primaryCategoriesOrderByRank()">
            <div class="category pointer" (click)="selectAnomaly(category)" (keydown.enter)="selectAnomaly(category)" tabindex="0">
              <div class="row">
                <div class="col-12 col-lg-3 mb-2 text-center">
                  <img src="/assets/images/{{category.icon}}" alt="Icône catégorie de problème" *ngIf="category.icon"/>
                </div>
                <div class="col-12 col-lg-9 pl-lg-0">
                  <h5 class="mb-0">{{category.category}}</h5>
                  <span class="note">{{category.description}}</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <h3 id="otherCategories" class="pointer other-problems" (click)="toggleSecondaryCategories()" (keydown.enter)="toggleSecondaryCategories()" tabindex="0">
          Autres problèmes &nbsp;?
        </h3>

        <ul *ngIf="showSecondaryCategories">
          <li *ngFor="let category of secondaryCategoriesOrderByRank()" class="pointer" (click)="selectAnomaly(category)" (keydown.enter)="selectAnomaly(category)" tabindex="0">
            <h5 class="other-problems">{{category.category}}</h5>
          </li>
        </ul>

      </div>
    </section>

    <section class="section section-lighter-grey">
      <div class="container">
        <div class="row">
          <div class="col-12 col-sm-4 pl-sm-4 pr-sm-4">
            <div class="icon">
              <img src="/assets/images/icon_fast.png" alt="Icône magasin"/>
            </div>
            <p class="text-center"><b>Rapide</b></p>
            <p>
              Des questions simples pour vous guider afin de signaler rapidement votre problème et connaître vos droits.
            </p>
          </div>
          <div class="col-12 col-sm-4 pl-sm-4 pr-sm-4">
            <div class="icon">
              <img src="/assets/images/icon_approbation.png" alt="Icône workflow"/>
            </div>
            <p class="text-center"><b>Transparent</b></p>
            <p>
              Le commerçant, s’il le souhaite, a accès aux signalements. Cela lui permet de procéder spontanément aux corrections utiles, sans sanction.
            </p>
          </div>
          <div class="col-12 col-sm-4 pl-sm-4 pr-sm-4">
            <div class="icon">
              <img src="/assets/images/icon_collaboration.png" alt="Icône alarme"/>
            </div>
            <p class="text-center"><b>Participatif</b></p>
            <p>
              Vous êtes plusieurs à signaler les mêmes anomalies et la situation perdure ? Les enquêteurs de la répression des fraudes (<abbr title="Direction Général de la Concurrence, Consommation et Répression des Fraudes">DGCCRF</abbr>) seront avertis afin d’intervenir.
            </p>
          </div>
        </div>
      </div>
    </section>
  </main>
