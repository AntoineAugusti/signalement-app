<alert class="text-center" type="danger" dismissible="true" [isOpen]="report && report.retrievedFromStorage" (onClosed)="removeStoredReport()">
  <h4>Vous avez déjà commencé un signalement, souhaitez-vous le finaliser pour l'envoyer au commerçant ?</h4>
  <button type="submit" class="button-outline warning" (click)="removeStoredReport()" appAutofocus>Non</button>
  <button type="submit" class="button warning ml-4 ml-sm-5" (click)="restoreStoredReport()">Oui</button>
</alert>

<div class="banner text-center section section-primary" role="region">
  <div class="container text-center">
    <img src="/assets/images/icons-baseline.svg" class="pb-3 d-none d-lg-inline-block" alt="Icônes signaler" />
    <h1>
      Signaler un problème à la répression&nbsp;des&nbsp;fraudes<br> en toute transparence avec le commerçant !
    </h1>
  </div>
</div>

<main role="main">

  <section class="section section-white">
      <div class="container">
        <h2 class="text-center">Comment ça marche</h2>
        <div class="row">
          <div class="col-12 col-sm-3">
            <div class="card">
              <div class="card-body">
                <h6 class="card-title">
                  Vous avez rencontré un problème avec un commerçant ?
                </h6>
              </div>
              <img src="/assets/images/picture-problem.svg" class="card-img-bottom" alt="Illustration" />
            </div>
          </div>
          <div class="col-12 col-sm-3">
            <div class="card">
              <div class="card-body">
                <h6 class="card-title">
                  Faites un signalement SignalConso.
                </h6>
              </div>
              <img src="/assets/images/picture-alert.svg" class="card-img-bottom" alt="Illustration" />
            </div>
          </div>
          <div class="col-12 col-sm-3">
            <div class="card">
              <div class="card-body">
                <h6 class="card-title">
                  Le commerçant est prévenu et peut intervenir.
                </h6>
              </div>
              <img src="/assets/images/picture-pro.svg" class="card-img-bottom" alt="Illustration" />
            </div>
          </div>
          <div class="col-12 col-sm-3">
            <div class="card">
              <div class="card-body">
                <h6 class="card-title">
                  La répression des fraudes intervient si c’est nécessaire.
                </h6>
              </div>
              <img src="/assets/images/picture-inspect.svg" class="card-img-bottom" alt="Illustration" />
            </div>
          </div>
        </div>
        <p class="indication">
          Un signalement ne constitue pas une saisine formelle de la <abbr title="Direction Général de la Concurrence, Consommation et Répression des Fraudes">DGCCRF</abbr> au sens de
          l’<u>article L. 112-8 du code des relations entre le public et l’administration</u>.
          <br/>Notre plateforme ne propose pas de suivi personnalisé de votre dossier.
        </p>
        <div class="text-center">
          <button type="button" class="btn btn-warning" (click)="scrollToElement(categoryList)">
            Signaler un problème<img src="/assets/images/icon-warning.svg" alt="Icône attention" />
          </button>
        </div>
      </div>
  </section>

  <section #categoryList class="section section-primary">

    <div class="container">
      <h2 class="text-center">Quel problème avez-vous rencontré ?</h2>
      <div class="row pb-4">
        <div class="col-12 col-sm-6 col-md-4" *ngFor="let category of primaryCategoriesOrderByRank()">
          <div class="category pointer" (click)="selectAnomaly(category)" (keydown.enter)="selectAnomaly(category)" tabindex="0">
            <div class="row">
              <div class="col-12 col-lg-3 mb-2 text-center">
                <img src="/assets/images/{{category.icon}}" alt="Icône catégorie de problème" *ngIf="category.icon"/>
              </div>
              <div class="col-12 col-lg-9 pl-lg-0">
                <h5 class="mb-0">{{category.category}}</h5>
                <span class="note">{{category.description}}</span>
              </div>
            </div>
          </div>
        </div>

        <div class="col-12 col-sm-6 col-md-4" *ngIf="!showSecondaryCategories; else secondaryCategories">
          <div class="category pointer text-center align-middle" (click)="toggleSecondaryCategories()" (keydown.enter)="toggleSecondaryCategories()" tabindex="0">
            <h5><br/>Autres problèmes</h5>
          </div>
        </div>

        <ng-template #secondaryCategories>
          <div class="col-12 col-sm-6 col-md-4" *ngFor="let category of secondaryCategoriesOrderByRank()">
            <div class="category pointer" (click)="selectAnomaly(category)" (keydown.enter)="selectAnomaly(category)" tabindex="0">
              <div class="row">
                <div class="col-12 col-lg-3 mb-2 text-center">
                  <img src="/assets/images/{{category.icon}}" alt="Icône catégorie de problème" *ngIf="category.icon"/>
                </div>
                <div class="col-12 col-lg-9 pl-lg-0">
                  <h5 class="mb-0">{{category.category}}</h5>
                  <span class="note">{{category.description}}</span>
                </div>
              </div>
            </div>
          </div>
        </ng-template>
      </div>

    </div>
  </section>
</main>
